{"version":3,"sources":["webpack:///./src/images/favicon-16x16.png","webpack:///./src/images/favicon-32x32.png","webpack:///./src/images/apple-touch-icon.png","webpack:///./src/images/question.png","webpack:///./src/js/app.js"],"names":["options","autorotate","rotation","xa","Math","PI","ya","za","gui","dat","closed","rotgui","addFolder","add","name","coords","map","label","split","num","parseInt","rotateAndProject","rot","coord","angle","mat","vec","THREE","fromArray","applyMatrix4","set","cos","sin","rotateYW","rotateZW","w","project","hammingDistance","x","y","distance","i","lineMaterialMaker","color","linewidth","opacity","transparent","canvas","composer","renderer","camera","scene","materials","cube","cubeGeometry","cubeMaterial","edges","numvertices","j","push","findEdges","then","antialias","setSize","window","innerWidth","innerHeight","domElement","document","getElementById","appendChild","pixelRatio","devicePixelRatio","width","clientWidth","height","clientHeight","position","lookAt","edgepair","materialList","controls","OrbitControls","target","update","length","edge","vertices","faces","EffectComposer","renderPass","RenderPass","addPass","bloomPass","UnrealBloomPass","threshold","strength","radius","renderToScreen","init","animate","requestAnimationFrame","t","Date","now","deltaTime","needsResize","resizeRenderer","aspect","updateProjectionMatrix","projected","rad","getAngle","getObjectByName","geometry","verticesNeedUpdate","slice","elementsNeedUpdate","render"],"mappings":"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","file":"1.app.js","sourcesContent":["export default __webpack_public_path__ + \"images/favicon-16x16.png\";","export default __webpack_public_path__ + \"images/favicon-32x32.png\";","export default __webpack_public_path__ + \"images/apple-touch-icon.png\";","export default __webpack_public_path__ + \"images/question.png\";","import * as THREE from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass.js';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls.js';\n// favicon imports\nimport favicon16 from './../images/favicon-16x16.png';\nimport favicon32 from './../images/favicon-32x32.png';\nimport appleTouchIcon from './../images/apple-touch-icon.png'\nimport questionIcon from './../images/question.png'\n\nimport * as dat from 'dat.gui'\n\nimport './../css/app.scss';\n\n// we can represent all the vertices by binary numbers\nconst labels = [\n  '0000',\n  '0001',\n  '0010',\n  '0011',\n  '0100',\n  '0101',\n  '0110',\n  '0111',\n  '1000',\n  '1001',\n  '1010',\n  '1011',\n  '1100',\n  '1101',\n  '1110',\n  '1111',\n];\n\nconst lineColor1 = 0xF9D423;\nconst lineColor2 = 0xFC913A;\nconst MaterialColor = 0x79BD9A;\n\n// GUI code\nconst options = {\n  autorotate: true,\n  rotation: {xa: Math.PI/2, ya: 0, za: 0}\n};\n\nconst gui = new dat.GUI({closed: false})\nconst rotgui = gui.addFolder('Rotation');\nrotgui.add(options.rotation, 'xa', 0, Math.PI*2).name('on XW plane');\nrotgui.add(options.rotation, 'ya', 0, Math.PI*2).name('on YW plane');\nrotgui.add(options.rotation, 'za', 0, Math.PI*2).name('on ZW plane');\ngui.add(options, 'autorotate');\n\n// creates coords centered at the origin\nconst coords = labels.map(function(label){ return label.split(\"\").map(function(num){ return parseInt(num) - 0.5;})});\n\n// gets the rotattion matrices for rotation along xw, yw, zw planes\nfunction rotateXW(angle) {\n  const mat = new THREE.Matrix4();\n  mat.set(\n    Math.cos(angle), 0, 0, -Math.sin(angle),\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    Math.sin(angle), 0, 0, Math.cos(angle)\n  );\n  return mat;\n}\n\nfunction rotateYW(angle) {\n  const mat = new THREE.Matrix4();\n  mat.set(\n    1, 0, 0, 0,\n    0, Math.cos(angle), 0, Math.sin(angle),\n    0, 0, 1, 0,\n    0, -Math.sin(angle), 0, Math.cos(angle)\n  );\n  return mat;\n}\n\nfunction rotateZW(angle) {\n  const mat = new THREE.Matrix4();\n  mat.set(\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, Math.cos(angle), -Math.sin(angle),\n    0, 0, Math.sin(angle), Math.cos(angle)\n  );\n  return mat;\n}\n\n// w is the position of the point\nfunction project(w) {\n  const lw = 1.5; // light source\n  const mat = new THREE.Matrix4();\n  mat.set(\n    1/(lw-w), 0, 0, 0,\n    0, 1/(lw-w), 0, 0,\n    0, 0, 1/(lw-w), 0,\n    0, 0, 0, 0\n  )\n  return mat;\n}\n\nfunction rotateAndProject(rot) {\n  return coords.map(function(coord) {\n    const vec = new THREE.Vector4().fromArray(coord);\n    return vec.applyMatrix4(rotateXW(rot.xa)).applyMatrix4(rotateYW(rot.ya)).applyMatrix4(rotateZW(rot.za)).applyMatrix4(project(vec.w));\n  })\n}\n\n// hamming distance\n\nfunction hammingDistance(x ,y) {\n  let distance = 0;\n  // takes the XOR of x & y and assigns it to i\n  // as long as i > 0, right shifts i by 1 and checks if the last bit is set\n  // if so, adds to distance\n  for(let i = x^y; i > 0; i=i>>1) {\n    if (i&1) {\n      distance +=1\n    }\n  }\n  return distance;\n}\n\nfunction findEdges(numvertices) {\n  const edges = [];\n  for(let i=0; i<numvertices; i++) {\n    for (let j=0; j<numvertices; j++) {\n      // we only need top part of the matrix, otherwise, values would repeat\n      if (j <= i) continue;\n      const h = hammingDistance(i, j)\n      if (h == 1) {\n        edges.push([i, j]);\n      }\n    }\n  }\n  return edges\n}\n\n// making materials\nfunction lineMaterialMaker(color) {\n  return new THREE.LineBasicMaterial ({\n    color: color,\n    linewidth: 2,\n    opacity: 0.5,\n    transparent: true\n  });\n}\n// choose material based on edge\nfunction chooseMaterial(edgepair, materialList) {\n  return edgepair[0]&4 ? materialList[1]: materialList[0];\n}\n\nfunction getAngle(t) {\n  const rad = Math.PI/180;\n  if (options.autorotate) {\n    return {xa: t / 20 * rad, ya: t / 20 * rad, za: t / 20 * rad};\n  }\n  return options.rotation;\n}\n\n// helper to deal with canvas resize\nfunction resizeRenderer(renderer) {\n  const canvas = renderer.domElement;\n  const pixelRatio = window.devicePixelRatio;\n  const width = canvas.clientWidth * pixelRatio | 0;\n  const height = canvas.clientHeight * pixelRatio | 0;\n  const needsResize = canvas.width !== width || canvas.height !== height;\n  if (needsResize) {\n    renderer.setSize(width, height, false);\n  }\n  return needsResize;\n}\n\n// tesseract has 16 vertices\nconst edges = findEdges(16);\n\nlet canvas, composer, renderer, fov, aspect, near, far, camera, scene, materials;\nlet then=0;\nlet cube, cubeGeometry, cubeMaterial;\n\nfunction init() {\n  // go full width/height\n  renderer = new THREE.WebGLRenderer({antialias: true});\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  canvas = renderer.domElement;\n  document.getElementById('canvasContainer').appendChild(canvas);\n\n  const pixelRatio = window.devicePixelRatio;\n  const width = canvas.clientWidth * pixelRatio | 0;\n  const height = canvas.clientHeight * pixelRatio | 0;\n  //renderer.toneMapping = THREE.ReinhardToneMapping;\n  //renderer.toneMappingExposure = Math.pow(1.24, 4.0);\n\n  fov = 60;\n  aspect = 2;\n  near = 1;\n  far = 1000;\n  camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n  camera.position.set(1.2, 1.4, 2);\n  camera.lookAt(0, 0, 0);\n\n  // controls\n  const controls = new OrbitControls(camera, canvas);\n  controls.target.set(0, 0, 0);\n  controls.update();\n\n  // scene\n  scene = new THREE.Scene();\n\n\n  // edges\n  materials = [lineMaterialMaker(lineColor1), lineMaterialMaker(lineColor2)];\n  for (let i=0; i < edges.length; i++) {\n    const edge = new THREE.Line( new THREE.Geometry(), chooseMaterial(edges[i], materials));\n    edge.name = 'edge_' + i;\n    scene.add(edge)\n  }\n\n  // cube things\n  cubeMaterial = new THREE.MeshBasicMaterial({\n    color: MaterialColor,\n    opacity: 0.25,\n    transparent: true\n\n  });\n\n  cubeGeometry = new THREE.Geometry();\n  for (var i=0; i<8; i++) {\n    cubeGeometry.vertices.push(\n      new THREE.Vector3(0, 0, 0)\n    );\n  }\n\n  cubeGeometry.faces.push(\n    new THREE.Face3(0, 3, 2),\n    new THREE.Face3(0, 1, 3),\n    new THREE.Face3(1, 7, 3),\n    new THREE.Face3(1, 5, 7),\n    new THREE.Face3(5, 6, 7),\n    new THREE.Face3(5, 4, 6),\n    new THREE.Face3(4, 2, 6),\n    new THREE.Face3(4, 0, 2),\n    new THREE.Face3(2, 7, 6),\n    new THREE.Face3(2, 3, 7),\n    new THREE.Face3(4, 1, 0),\n    new THREE.Face3(4, 5, 1)\n  );\n  cube = new THREE.Mesh(cubeGeometry, cubeMaterial);\n  scene.add(cube);\n\n\n  // FX\n  composer = new EffectComposer(renderer);\n  const renderPass = new RenderPass(scene, camera);\n  // renderPass.renderToScreen=true;\n  composer.addPass(renderPass);\n\n  const bloomPass = new UnrealBloomPass(new THREE.Vector2(width, height), 1.5, 0.4, 0.85);\n  bloomPass.threshold = 0.04;\n  bloomPass.strength = 1.55;\n  bloomPass.radius = 0.02;\n  bloomPass.renderToScreen = true;\n  composer.addPass(bloomPass);\n}\n\nfunction animate() {\n  requestAnimationFrame(animate);\n  render();\n}\n\nfunction render() {\n  const t = Date.now();\n  const now = t * 0.001\n  const deltaTime = (now - then) * 0.001;\n  then = now;\n\n  // responsive camera, updates on size change\n  if (resizeRenderer(renderer)) {\n    const canvas = composer.renderer.domElement;\n    camera.aspect = canvas.clientWidth / canvas.clientHeight;\n    camera.updateProjectionMatrix();\n    composer.setSize(canvas.width, canvas.height);\n  }\n\n  const rot = getAngle(t)\n  const projected = rotateAndProject(rot);\n\n  // this is slow\n  for (let i=0; i<edges.length; i++) {\n    const edge = scene.getObjectByName('edge_' + i);\n    edge.geometry.vertices = [projected[edges[i][0]], projected[edges[i][1]]];\n    edge.geometry.verticesNeedUpdate=true;\n  }\n  cube.geometry.vertices = projected.slice(0, 8);\n  cube.geometry.verticesNeedUpdate = true;\n  cube.geometry.elementsNeedUpdate = true;\n\n  composer.render(deltaTime);\n\n}\n\ninit();\nanimate();\n"],"sourceRoot":""}